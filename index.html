<!DOCTYPE html>
<!-- Add dark class to html tag for Tailwind's dark mode to work -->
<html lang="es" class=""> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Precios - Cari√±ito PB</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');

        /* --- THEME SWITCHING STYLES --- */
        
        /* Light Theme (default) */
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #fce7f3 0%, #a7f3d0 50%, #bfdbfe 100%);
            transition: background 0.5s ease, color 0.5s ease;
        }

        /* Dark Theme */
        .dark body {
            font-family: 'Manrope', sans-serif;
            background: #111111;
        }
        
        /* General button styles for easy override */
        .duration-btn {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            line-height: 1.4;
            padding: 0.75rem;
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }
        .duration-btn span {
            font-weight: 600;
        }
        .duration-btn .price {
             font-weight: 700;
             font-size: 1rem;
             margin-top: 4px;
        }
        .duration-btn .details {
            font-size: 0.75rem;
            opacity: 0.8;
        }
    </style>
     <script>
        // Tell Tailwind to use dark mode when the `dark` class is present
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
</head>
<body class="text-gray-800 dark:text-gray-200 min-h-screen relative transition-colors duration-500">
    
    <div class="container mx-auto px-4 py-8 relative z-10">
        <div class="text-center mb-12">
            <div class="bg-white/10 dark:bg-white/5 backdrop-blur-md border border-white/20 dark:border-white/10 rounded-3xl p-8 mb-8 transition-all duration-500">
                <h1 id="main-title" class="text-5xl md:text-6xl font-bold text-gray-800 dark:text-[#AFFF33] mb-4 transition-colors duration-500">
                    Cari√±ito Photo Booth
                </h1>
                <p id="main-subtitle" class="text-2xl text-gray-700 dark:text-gray-300 mb-6 transition-colors duration-500">Calculadora de Precios para Eventos</p>
                <div class="w-32 h-2 bg-gradient-to-r from-pink-400 to-emerald-400 dark:bg-[#AFFF33] mx-auto rounded-full transition-all duration-500"></div>
            </div>
        </div>

        <div class="flex justify-center mb-6">
            <a id="download-brochure" href="Brochure_Sociales.pdf" download="Brochure_Sociales.pdf" class="font-bold py-3 px-6 rounded-2xl shadow-lg flex items-center space-x-2 transform hover:scale-105 transition-all duration-300">
                <span>üìÑ</span>
                <span>Descargar folleto</span>
            </a>
        </div>

        <div class="flex justify-center mb-8">
            <div class="bg-white/10 dark:bg-white/5 backdrop-blur-md border border-white/20 dark:border-white/10 rounded-2xl p-2 flex space-x-2 transition-all duration-500">
                <button onclick="switchEventType('social')" id="social-tab" class="event-tab px-6 py-3 rounded-xl font-semibold">
                    üéâ Eventos Sociales
                </button>
                <button onclick="switchEventType('corporate')" id="corporate-tab" class="event-tab px-6 py-3 rounded-xl font-semibold">
                    üè¢ Branding / Activaciones
                </button>
            </div>
        </div>

        <div id="main-includes-card" class="bg-white/10 dark:bg-white/5 backdrop-blur-md border border-white/20 dark:border-white/10 rounded-3xl p-6 mb-8 transition-all duration-500">
            <h3 class="text-2xl font-bold text-center text-gray-800 dark:text-white mb-6">‚ú® Todos nuestros servicios incluyen:</h3>
            <div id="main-included-services" class="grid md:grid-cols-2 gap-4 text-sm">
            </div>
        </div>

        <div class="grid lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 space-y-6">
                <!-- Service Cards will be populated by JS -->
                <div id="service-cards-container"></div>
            </div>

            <!-- Cotizaci√≥n Sidebar -->
            <div class="lg:col-span-1">
                <div class="sticky top-8">
                    <div id="quote-card" class="bg-white/10 dark:bg-white/5 backdrop-blur-md border border-white/20 dark:border-white/10 rounded-3xl p-6 transition-all duration-500">
                        <h2 class="text-3xl font-bold mb-6 text-center text-gray-800 dark:text-white">üí∞ Cotizaci√≥n</h2>
                        
                        <div class="space-y-4 mb-6" id="price-breakdown">
                            <p class="text-center text-gray-600 dark:text-gray-400">Selecciona un servicio para ver el precio</p>
                        </div>
                        
                        <div class="bg-black/5 dark:bg-black/20 rounded-2xl p-6 mb-4">
                            <div class="text-center">
                                <p class="text-sm opacity-80 mb-2">Total del Evento</p>
                                <p id="grand-total" class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-emerald-500 dark:text-[#AFFF33]">$0</p>
                                <p id="iva-note" class="text-xs mt-2 opacity-70">* No incluye I.V.A.</p>
                            </div>
                        </div>

                        <p id="discount-note" class="hidden text-center text-pink-700 dark:text-lime-400 font-semibold mb-4">
                            ‚≠ê Por contratar 2 servicios o m√°s, tenemos un descuento especial para ti! Cont√°ctanos.
                        </p>
                        
                        <button onclick="generateQuote()" id="generate-quote-btn" class="w-full font-bold py-4 px-6 rounded-2xl shadow-lg mb-3 transform hover:scale-105 transition-all duration-300">
                            üìã Generar Cotizaci√≥n
                        </button>
                        
                        <button onclick="resetCalculator()" class="w-full bg-white/30 dark:bg-white/5 text-gray-800 dark:text-white font-semibold py-3 px-6 rounded-2xl hover:bg-white/40 dark:hover:bg-white/10 transition-colors">
                            üîÑ Reiniciar
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Modals (Pop-ups) -->
    <div id="quote-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-900 rounded-3xl p-8 max-w-lg w-full max-h-[90vh] overflow-y-auto border border-white/10">
            <h3 class="text-3xl font-bold text-gray-800 dark:text-white mb-6 text-center">üìã Cotizaci√≥n Detallada</h3>
            <div id="quote-content" class="space-y-4 text-gray-700 dark:text-gray-300 mb-6"></div>
            <div class="flex space-x-3">
                <button onclick="closeQuote()" class="flex-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 py-3 px-4 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors font-semibold">Cerrar</button>
                <button id="modal-send-btn" onclick="sendQuoteToWhatsApp()" class="flex-1 font-semibold py-3 px-4 rounded-xl transform hover:scale-105 transition-all duration-300">üì± Contactar por WhatsApp</button>
            </div>
        </div>
    </div>
    <div id="success-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-900 rounded-3xl p-8 max-w-md w-full text-center border border-white/10">
            <div class="text-6xl mb-4">‚úÖ</div>
            <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-4">¬°Te llevamos a WhatsApp!</h3>
            <p class="text-gray-600 dark:text-gray-400 mb-4">Se est√° abriendo WhatsApp con toda tu informaci√≥n.</p>
            <div class="bg-blue-50 dark:bg-indigo-500/10 p-4 rounded-xl mb-4 border border-blue-200 dark:border-indigo-500/20">
                <p class="text-sm text-blue-800 dark:text-indigo-300"><strong>üí° Si no se abre autom√°ticamente:</strong></p>
                <p class="text-sm text-blue-700 dark:text-indigo-400">‚Ä¢ Permite ventanas emergentes en tu navegador</p>
                <p class="text-sm text-blue-700 dark:text-indigo-400">‚Ä¢ O contacta directamente: <strong>+52 55 51907875</strong></p>
            </div>
            <button id="success-ok-btn" class="font-bold py-3 px-6 rounded-xl">¬°Perfecto!</button>
        </div>
    </div>


    <script>
    let currentEventType = 'social';
    let selectedServices = {};
    let additionalHours = { inflable: 0, platform: 0, mirror: 0 };
    let includeAlbum = false;

    // --- PRICE DATA ---
    const socialPrices = {
        inflable: { 2: 3499, 3: 4499, additional: 900 },
        platform: { 2: 3699, 3: 4599, 3.5: 4999, additional: 900 },
        mirror: { 2: 4999, 3: 5999, 3.5: 6499, additional: 900 }
    };

    const corporatePrices = {
        inflable: { premium: { hours: 3, price: 4499 }, adn: { hours: 3, price: 5499 }, additional: 900 },
        platform: { premium: { hours: 3, price: 4599 }, adn: { hours: 3, price: 5799 }, additional: 750 },
        mirror: { premium: { hours: 3, price: 5999 }, platino: { hours: 3.5, price: 7199 }, additional: 900 }
    };

    const extrasPrices = {
        album: 399
    };

    // --- INCLUDED SERVICES DATA ---
    const socialIncludes = [
        "Plantillas personalizadas", "Fotos impresas al instante en formato tira", "C√≥digo QR para compartir al instante en redes sociales",
        "Alfombra roja y mesa con props", "Material digital (fotos y GIFs)", "Montaje y desmontaje"
    ];

    const corporateIncludes = [
        "Animaciones y 2 plantillas personalizadas", "Backdrop: Fondo Inflable LED o Chroma Key", "Fotos impresas al instante en formato tira o postal",
        "C√≥digo QR para compartir tu marca al instante en redes sociales", "Alfombra roja y mesa con props", "Material digital (fotos y GIFs)",
        "Portal Personalizado del Evento", "Montaje y desmontaje"
    ];

    const corporateBoldBullets = [
        "Animaciones y 2 plantillas personalizadas", "Backdrop: Fondo Inflable LED o Chroma Key", 
        "Fotos impresas al instante en formato tira o postal", "Portal Personalizado del Evento"
    ];

    // --- UI & LOGIC FUNCTIONS ---
    function switchEventType(type) {
        currentEventType = type;
        const htmlEl = document.documentElement;
        const socialTab = document.getElementById('social-tab');
        const corporateTab = document.getElementById('corporate-tab');
        const mainTitle = document.getElementById('main-title');
        const mainSubtitle = document.getElementById('main-subtitle');
        
        // --- BUTTONS TO STYLE ---
        const brochureLink = document.getElementById('download-brochure');
        const generateBtn = document.getElementById('generate-quote-btn');
        const modalSendBtn = document.getElementById('modal-send-btn');
        const successOkBtn = document.getElementById('success-ok-btn');
        const primaryButtons = [brochureLink, generateBtn, modalSendBtn, successOkBtn];


        if (type === 'social') {
            htmlEl.classList.remove('dark');
            socialTab.classList.add('bg-gradient-to-r', 'from-pink-400', 'to-emerald-400', 'text-white');
            socialTab.classList.remove('text-gray-700');
            corporateTab.classList.remove('bg-[#AFFF33]', 'text-black');
            corporateTab.classList.add('text-gray-700');
            
            primaryButtons.forEach(btn => {
                btn.classList.remove('bg-[#AFFF33]', 'text-black');
                btn.classList.add('bg-gradient-to-r', 'from-pink-400', 'to-emerald-400', 'text-white');
            });

            brochureLink.href = 'Brochure_Sociales.pdf';
            brochureLink.download = 'Brochure_Sociales.pdf';
            mainTitle.textContent = "Cari√±ito Photo Booth";
            mainSubtitle.textContent = "Calculadora de Precios para Eventos";

        } else { // corporate
            htmlEl.classList.add('dark');
            corporateTab.classList.add('bg-[#AFFF33]', 'text-black');
            corporateTab.classList.remove('text-gray-700');
            socialTab.classList.remove('bg-gradient-to-r', 'from-pink-400', 'to-emerald-400', 'text-white');
            socialTab.classList.add('text-gray-700');

            primaryButtons.forEach(btn => {
                btn.classList.remove('bg-gradient-to-r', 'from-pink-400', 'to-emerald-400', 'text-white');
                btn.classList.add('bg-[#AFFF33]', 'text-black');
            });

            brochureLink.href = 'Brochure_Empresas.pdf';
            brochureLink.download = 'Brochure_Empresas.pdf';
            mainTitle.textContent = "Cari√±ito PB";
            mainSubtitle.textContent = "Calculadora de Precios para Branding y Activaciones";
        }
        
        renderServiceCards();
        renderIncludedServices();
        resetCalculator();
    }
    
    function renderServiceCards() {
        const container = document.getElementById('service-cards-container');
        let cardsHtml = '';

        if (currentEventType === 'social') {
            cardsHtml = `
            <div class="service-card bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-pink-200 transition-all duration-500">
                <div class="flex items-center mb-6">
                    <div class="w-16 h-16 bg-gradient-to-r from-pink-400 to-rose-400 rounded-2xl flex items-center justify-center mr-4 shadow-lg"><span class="text-3xl">üéà</span></div>
                    <div><h3 class="text-2xl font-bold text-gray-800">Cabina Inflable con LED</h3><p class="text-gray-600">Perfecta para bodas, XV a√±os, graduaciones</p></div>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-3">Elige tu Paquete</label>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="selectDuration('inflable', 2)" class="duration-btn duration-btn-inflable-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200"><span>Paquete Standard</span><span class="details">2 Hrs</span><span class="price">$3,499</span></button>
                            <button onclick="selectDuration('inflable', 3)" class="duration-btn duration-btn-inflable-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200"><span>Paquete Premium</span><span class="details">3 Hrs</span><span class="price">$4,499</span></button>
                        </div>
                    </div>
                    <div id="inflable-additional" class="hidden"><label class="block text-sm font-semibold text-gray-700 mb-3">Horas adicionales</label><div class="flex items-center space-x-3"><button onclick="changeAdditional('inflable', -1)" class="w-12 h-12 bg-pink-100 hover:bg-pink-200 rounded-full flex items-center justify-center transition-colors"><span class="text-xl font-bold text-pink-600">-</span></button><span id="inflable-additional-hours" class="text-2xl font-bold text-gray-800 w-16 text-center">0</span><button onclick="changeAdditional('inflable', 1)" class="w-12 h-12 bg-pink-100 hover:bg-pink-200 rounded-full flex items-center justify-center transition-colors"><span class="text-xl font-bold text-pink-600">+</span></button><span class="text-sm text-gray-600 ml-2">$900 + IVA c/u</span></div></div>
                </div>
            </div>
            <div class="service-card bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border-emerald-200 transition-all duration-500">
                <div class="flex items-center mb-6"><div class="w-16 h-16 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-2xl flex items-center justify-center mr-4 shadow-lg"><span class="text-3xl">üåü</span></div><div><h3 class="text-2xl font-bold text-gray-800">Plataforma 360¬∞ Infinity</h3><p class="text-gray-600">Experiencia inmersiva y videos espectaculares</p></div></div>
                <div class="space-y-4">
                    <div><label class="block text-sm font-semibold text-gray-700 mb-3">Elige tu Paquete</label><div class="grid grid-cols-1 md:grid-cols-3 gap-3"><button onclick="selectDuration('platform', 2)" class="duration-btn duration-btn-platform-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200"><span>Paquete Standard</span><span class="details">2 Hrs</span><span class="price">$3,699</span></button><button onclick="selectDuration('platform', 3)" class="duration-btn duration-btn-platform-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200"><span>Paquete Premium</span><span class="details">3 Hrs</span><span class="price">$4,599</span></button><button onclick="selectDuration('platform', 3.5)" class="duration-btn duration-btn-platform-3-5 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200"><span>‚ú® Promoci√≥n ‚ú® Paquete Platino</span><span class="details">+ Incluye Backdrop/Fondo Inflable LED.<br>3.5 Hrs</span><span class="price">$4,999</span></button></div></div>
                    <div id="platform-additional" class="hidden"><label class="block text-sm font-semibold text-gray-700 mb-3">Horas adicionales</label><div class="flex items-center space-x-3"><button onclick="changeAdditional('platform', -1)" class="w-12 h-12 bg-emerald-100 hover:bg-emerald-200 rounded-full flex items-center justify-center transition-colors"><span class="text-xl font-bold text-emerald-600">-</span></button><span id="platform-additional-hours" class="text-2xl font-bold text-gray-800 w-16 text-center">0</span><button onclick="changeAdditional('platform', 1)" class="w-12 h-12 bg-emerald-100 hover:bg-emerald-200 rounded-full flex items-center justify-center transition-colors"><span class="text-xl font-bold text-emerald-600">+</span></button><span class="text-sm text-gray-600 ml-2">$900 + IVA c/u</span></div></div>
                </div>
            </div>
            <div class="service-card bg-white/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border-purple-200 transition-all duration-500">
                <div class="flex items-center mb-6"><div class="w-16 h-16 bg-gradient-to-r from-purple-400 to-pink-400 rounded-2xl flex items-center justify-center mr-4 shadow-lg"><span class="text-3xl">‚ú®</span></div><div><h3 class="text-2xl font-bold text-gray-800">Magic Mirror 64"</h3><p class="text-gray-600">Espejo m√°gico interactivo de lujo</p></div></div>
                 <div class="space-y-4">
                    <div><label class="block text-sm font-semibold text-gray-700 mb-3">Elige tu Paquete</label><div class="grid grid-cols-1 md:grid-cols-3 gap-3"><button onclick="selectDuration('mirror', 2)" class="duration-btn duration-btn-mirror-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200"><span>Paquete Standard</span><span class="details">2 Hrs</span><span class="price">$4,999</span></button><button onclick="selectDuration('mirror', 3)" class="duration-btn duration-btn-mirror-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200"><span>Paquete Premium</span><span class="details">3 Hrs</span><span class="price">$5,999</span></button><button onclick="selectDuration('mirror', 3.5)" class="duration-btn duration-btn-mirror-3-5 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200"><span>‚ú® Promoci√≥n ‚ú® Paquete Platino</span><span class="details">+ Incluye Backdrop/Fondo Inflable LED.<br>3.5 Hrs</span><span class="price">$6,499</span></button></div></div>
                    <div id="mirror-additional" class="hidden"><label class="block text-sm font-semibold text-gray-700 mb-3">Horas adicionales</label><div class="flex items-center space-x-3"><button onclick="changeAdditional('mirror', -1)" class="w-12 h-12 bg-purple-100 hover:bg-purple-200 rounded-full flex items-center justify-center transition-colors"><span class="text-xl font-bold text-purple-600">-</span></button><span id="mirror-additional-hours" class="text-2xl font-bold text-gray-800 w-16 text-center">0</span><button onclick="changeAdditional('mirror', 1)" class="w-12 h-12 bg-purple-100 hover:bg-purple-200 rounded-full flex items-center justify-center transition-colors"><span class="text-xl font-bold text-purple-600">+</span></button><span class="text-sm text-gray-600 ml-2">$900 + IVA c/u</span></div></div>
                </div>
            </div>
            <!-- Extras for Social -->
            <h3 class="text-3xl font-bold text-center text-gray-800 mt-8 mb-4">Extras</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-white/80 backdrop-blur-sm rounded-3xl p-4 shadow-lg border border-white transition-all duration-500 text-center space-y-2"><h4 class="font-bold text-gray-800">Album de firmas</h4><p class="font-semibold text-gray-600">$399 MXN</p><button id="album-btn" onclick="toggleAlbum()" class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg w-full transition-colors">Agregar</button></div>
                <div class="bg-white/80 backdrop-blur-sm rounded-3xl p-4 shadow-lg border border-white transition-all duration-500 text-center space-y-2"><h4 class="font-bold text-gray-800">Shimmer Wall</h4><p class="font-semibold text-gray-600">a partir de $1,500 MXN</p><button onclick="openWhatsAppForQuote('Shimmer Wall')" class="bg-gradient-to-r from-pink-400 to-emerald-400 text-white font-semibold py-2 px-4 rounded-lg w-full">Cotizar</button></div>
                <div class="bg-white/80 backdrop-blur-sm rounded-3xl p-4 shadow-lg border border-white transition-all duration-500 text-center space-y-2"><h4 class="font-bold text-gray-800">Banner Personalizado</h4><p class="font-semibold text-gray-600">a partir de $2,500 MXN</p><button onclick="openWhatsAppForQuote('Banner Personalizado')" class="bg-gradient-to-r from-pink-400 to-emerald-400 text-white font-semibold py-2 px-4 rounded-lg w-full">Cotizar</button></div>
            </div>
            `;
        } else { // corporate
            cardsHtml = `
             <div class="service-card bg-gray-900/50 backdrop-blur-sm rounded-3xl p-6 shadow-xl border-white/10">
                <div class="flex items-center mb-6"><div class="w-16 h-16 bg-gray-800 rounded-2xl flex items-center justify-center mr-4 shadow-lg"><span class="text-3xl">üéà</span></div><div><h3 class="text-2xl font-bold text-white">Cabina Inflable con LED</h3><p class="text-gray-400">Ideal para eventos de marca, lanzamientos, activaciones</p></div></div>
                <div class="space-y-4">
                    <div><label class="block text-sm font-semibold text-gray-300 mb-3">Elige tu Paquete</label><div class="grid grid-cols-2 gap-3"><button onclick="selectDuration('inflable', 'premium')" class="duration-btn duration-btn-inflable-premium bg-gray-800 text-gray-300 rounded-xl hover:bg-gray-700"><span>Paquete Premium</span><span class="details">3 Hrs</span><span class="price">$4,499</span></button><button onclick="selectDuration('inflable', 'adn')" class="duration-btn duration-btn-inflable-adn bg-gray-800 text-gray-300 rounded-xl hover:bg-gray-700"><span>Paquete ADN de Marca</span><span class="details">3 Hrs</span><span class="price">$5,499</span></button></div></div>
                    <div id="inflable-additional" class="hidden"><label class="block text-sm font-semibold text-gray-300 mb-3">Horas adicionales</label><div class="flex items-center space-x-3"><button onclick="changeAdditional('inflable', -1)" class="w-12 h-12 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center transition-colors"><span class="text-xl font-bold text-[#AFFF33]">-</span></button><span id="inflable-additional-hours" class="text-2xl font-bold text-white w-16 text-center">0</span><button onclick="changeAdditional('inflable', 1)" class="w-12 h-12 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center transition-colors"><span class="text-xl font-bold text-[#AFFF33]">+</span></button><span id="inflable-additional-price" class="text-sm text-gray-400 ml-2">$900 + IVA c/u</span></div></div>
                </div>
            </div>
            <div class="service-card bg-gray-900/50 backdrop-blur-sm rounded-3xl p-6 shadow-xl border-white/10">
                <div class="flex items-center mb-6"><div class="w-16 h-16 bg-gray-800 rounded-2xl flex items-center justify-center mr-4 shadow-lg"><span class="text-3xl">üåü</span></div><div><h3 class="text-2xl font-bold text-white">Plataforma 360¬∞ Infinity</h3><p class="text-gray-400">Experiencia inmersiva y videos espectaculares</p></div></div>
                <div class="space-y-4">
                    <div><label class="block text-sm font-semibold text-gray-300 mb-3">Elige tu Paquete</label><div class="grid grid-cols-2 gap-3"><button onclick="selectDuration('platform', 'premium')" class="duration-btn duration-btn-platform-premium bg-gray-800 text-gray-300 rounded-xl hover:bg-gray-700"><span>Paquete Premium</span><span class="details">3 Hrs</span><span class="price">$4,599</span></button><button onclick="selectDuration('platform', 'adn')" class="duration-btn duration-btn-platform-adn bg-gray-800 text-gray-300 rounded-xl hover:bg-gray-700"><span>Paquete ADN de Marca</span><span class="details">+ Incluye Backdrop<br>3 Hrs</span><span class="price">$5,799</span></button></div></div>
                    <div id="platform-additional" class="hidden"><label class="block text-sm font-semibold text-gray-300 mb-3">Horas adicionales</label><div class="flex items-center space-x-3"><button onclick="changeAdditional('platform', -1)" class="w-12 h-12 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center transition-colors"><span class="text-xl font-bold text-[#AFFF33]">-</span></button><span id="platform-additional-hours" class="text-2xl font-bold text-white w-16 text-center">0</span><button onclick="changeAdditional('platform', 1)" class="w-12 h-12 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center transition-colors"><span class="text-xl font-bold text-[#AFFF33]">+</span></button><span id="platform-additional-price" class="text-sm text-gray-400 ml-2">$750 + IVA c/u</span></div></div>
                </div>
            </div>
            <div class="service-card bg-gray-900/50 backdrop-blur-sm rounded-3xl p-6 shadow-xl border-white/10">
                <div class="flex items-center mb-6"><div class="w-16 h-16 bg-gray-800 rounded-2xl flex items-center justify-center mr-4 shadow-lg"><span class="text-3xl">‚ú®</span></div><div><h3 class="text-2xl font-bold text-white">Magic Mirror 64"</h3><p class="text-gray-400">Espejo m√°gico interactivo de lujo</p></div></div>
                <div class="space-y-4">
                    <div><label class="block text-sm font-semibold text-gray-300 mb-3">Elige tu Paquete</label><div class="grid grid-cols-2 gap-3"><button onclick="selectDuration('mirror', 'premium')" class="duration-btn duration-btn-mirror-premium bg-gray-800 text-gray-300 rounded-xl hover:bg-gray-700"><span>Paquete Premium</span><span class="details">3 Hrs</span><span class="price">$5,999</span></button><button onclick="selectDuration('mirror', 'platino')" class="duration-btn duration-btn-mirror-platino bg-gray-800 text-gray-300 rounded-xl hover:bg-gray-700"><span>Paquete Platino</span><span class="details">+ Incluye Backdrop<br>3.5 Hrs</span><span class="price">$7,199</span></button></div></div>
                    <div id="mirror-additional" class="hidden"><label class="block text-sm font-semibold text-gray-300 mb-3">Horas adicionales</label><div class="flex items-center space-x-3"><button onclick="changeAdditional('mirror', -1)" class="w-12 h-12 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center transition-colors"><span class="text-xl font-bold text-[#AFFF33]">-</span></button><span id="mirror-additional-hours" class="text-2xl font-bold text-white w-16 text-center">0</span><button onclick="changeAdditional('mirror', 1)" class="w-12 h-12 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center transition-colors"><span class="text-xl font-bold text-[#AFFF33]">+</span></button><span id="mirror-additional-price" class="text-sm text-gray-400 ml-2">$900 + IVA c/u</span></div></div>
                </div>
            </div>
            <!-- Extras for Corporate -->
            <h3 class="text-3xl font-bold text-center text-white mt-8 mb-4">Extras</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-gray-900/50 backdrop-blur-sm rounded-3xl p-4 shadow-lg border border-white/10 text-center space-y-2"><h4 class="font-bold text-white">Shimmer Wall</h4><p class="font-semibold text-gray-400">a partir de $1,500 MXN</p><button onclick="openWhatsAppForQuote('Shimmer Wall')" class="bg-[#AFFF33] text-black font-semibold py-2 px-4 rounded-lg w-full">Cotizar</button></div>
                <div class="bg-gray-900/50 backdrop-blur-sm rounded-3xl p-4 shadow-lg border border-white/10 text-center space-y-2"><h4 class="font-bold text-white">Banner Personalizado</h4><p class="font-semibold text-gray-400">a partir de $2,500 MXN</p><button onclick="openWhatsAppForQuote('Banner Personalizado')" class="bg-[#AFFF33] text-black font-semibold py-2 px-4 rounded-lg w-full">Cotizar</button></div>
            </div>
            `;
        }
        container.innerHTML = cardsHtml;
    }


    function renderIncludedServices() {
        const container = document.getElementById('main-included-services');
        const services = currentEventType === 'social' ? socialIncludes : corporateIncludes;
        const icon = currentEventType === 'social' ? '‚≠ê' : 'üî•';
        container.innerHTML = '';
        
        services.forEach(item => {
            const isBold = currentEventType === 'corporate' && corporateBoldBullets.includes(item);
            const content = isBold 
                ? `<span class="font-bold text-gray-800 dark:text-white">${item}</span>` 
                : `<span>${item}</span>`;

            container.innerHTML += `
                <div class="flex items-center">
                    <span class="mr-2">${icon}</span>
                    <span class="text-emerald-500 dark:text-lime-400 mr-2">‚úì</span>
                    <span class="ml-2">${content}</span>
                </div>`;
        });
    }

    function selectDuration(service, key) {
        document.querySelectorAll(`.duration-btn[class*="duration-btn-${service}"]`).forEach(btn => {
            btn.classList.remove('bg-gradient-to-r', 'from-pink-400', 'to-emerald-400', 'text-white', 'bg-[#AFFF33]', 'text-black');
            if (currentEventType === 'social') {
                btn.classList.add('bg-gray-100', 'text-gray-700');
            } else {
                btn.classList.add('bg-gray-800', 'text-gray-300');
            }
        });
        
        const safeKeyClass = String(key).replace('.', '-');
        const selectedBtn = document.querySelector(`.duration-btn-${service}-${safeKeyClass}`);
        if (selectedBtn) {
            if (currentEventType === 'social') {
                selectedBtn.classList.remove('bg-gray-100', 'text-gray-700');
                selectedBtn.classList.add('bg-gradient-to-r', 'from-pink-400', 'to-emerald-400', 'text-white');
            } else {
                selectedBtn.classList.remove('bg-gray-800', 'text-gray-300');
                selectedBtn.classList.add('bg-[#AFFF33]', 'text-black');
            }
        }
        
        const additionalSection = document.getElementById(`${service}-additional`);
        if (currentEventType === 'social') {
            const prices = socialPrices;
            selectedServices[service] = { duration: key, price: prices[service][key], additionalPrice: prices[service].additional };
            if (key > 2) { 
                additionalSection.classList.remove('hidden');
            } else { 
                additionalSection.classList.add('hidden');
            }
        } else { // corporate
            const prices = corporatePrices;
            selectedServices[service] = { duration: prices[service][key].hours, price: prices[service][key].price, packageName: key, additionalPrice: prices[service].additional };
            const priceEl = document.getElementById(`${service}-additional-price`);
            if(priceEl) priceEl.textContent = `$${prices[service].additional} + IVA c/u`;
            additionalSection.classList.remove('hidden');
        }

        additionalHours[service] = 0;
        const additionalHoursEl = document.getElementById(`${service}-additional-hours`);
        if(additionalHoursEl) additionalHoursEl.textContent = '0';
        updateTotals();
    }
    
    function changeAdditional(service, change) {
        if (!selectedServices[service]) return;
        additionalHours[service] = Math.max(0, additionalHours[service] + change);
        document.getElementById(`${service}-additional-hours`).textContent = additionalHours[service];
        updateTotals();
    }

    function toggleAlbum() {
        includeAlbum = !includeAlbum;
        const btn = document.getElementById('album-btn');
        if (includeAlbum) {
            btn.classList.add('bg-gradient-to-r', 'from-pink-400', 'to-emerald-400', 'text-white');
            btn.classList.remove('bg-gray-200', 'text-gray-800');
            btn.textContent = 'Agregado';
        } else {
            btn.classList.remove('bg-gradient-to-r', 'from-pink-400', 'to-emerald-400', 'text-white');
            btn.classList.add('bg-gray-200', 'text-gray-800');
            btn.textContent = 'Agregar';
        }
        updateTotals();
    }

    function openWhatsAppForQuote(item) {
        const message = `¬°Hola! Me gustar√≠a cotizar un ${item} para mi evento.`;
        const whatsappUrl = `https://wa.me/525551907875?text=${encodeURIComponent(message)}`;
        window.open(whatsappUrl, '_blank');
    }

    function updateTotals() {
        let total = 0;
        let breakdownHtml = '';
        let selectedCount = 0;

        for (const serviceId in selectedServices) {
            const service = selectedServices[serviceId];
            if (!service || !service.price) continue;
            let serviceTotal = service.price;
            let serviceName = '';
            switch(serviceId) {
                case 'inflable': serviceName = 'Cabina Inflable'; break;
                case 'platform': serviceName = 'Plataforma 360¬∞'; break;
                case 'mirror': serviceName = 'Magic Mirror 64"'; break;
            }
            let durationText = `${service.duration} horas`;
            if (additionalHours[serviceId] > 0) {
                serviceTotal += additionalHours[serviceId] * service.additionalPrice;
                durationText += ` + ${additionalHours[serviceId]}h extra`;
            }
            breakdownHtml += `<div class="flex justify-between items-center py-2 border-b border-gray-200 dark:border-white/10"><span class="font-semibold">${serviceName} (${durationText})</span><span class="font-bold">$${serviceTotal.toLocaleString()}</span></div>`;
            total += serviceTotal;
            selectedCount++;
        }

        if (includeAlbum && currentEventType === 'social') {
            total += extrasPrices.album;
            breakdownHtml += `<div class="flex justify-between items-center py-2 border-b border-gray-200 dark:border-white/10"><span class="font-semibold">Album de firmas</span><span class="font-bold">$${extrasPrices.album.toLocaleString()}</span></div>`;
        }

        document.getElementById('price-breakdown').innerHTML = (selectedCount === 0 && !includeAlbum) ? `<p class="text-center text-gray-600 dark:text-gray-400">Selecciona un servicio para ver el precio</p>` : breakdownHtml;
        document.getElementById('grand-total').textContent = `$${total.toLocaleString()}`;
        document.getElementById('discount-note').classList.toggle('hidden', selectedCount < 2);
    }
    
    function resetCalculator() {
        selectedServices = {};
        additionalHours = { inflable: 0, platform: 0, mirror: 0 };
        includeAlbum = false;
        
        const albumBtn = document.getElementById('album-btn');
        if (albumBtn) {
            albumBtn.classList.remove('bg-gradient-to-r', 'from-pink-400', 'to-emerald-400', 'text-white');
            albumBtn.classList.add('bg-gray-200', 'text-gray-800');
            albumBtn.textContent = 'Agregar';
        }

        document.querySelectorAll('.duration-btn').forEach(btn => {
             btn.classList.remove('bg-gradient-to-r', 'from-pink-400', 'to-emerald-400', 'text-white', 'bg-[#AFFF33]', 'text-black');
             if(currentEventType === 'social') {
                btn.classList.add('bg-gray-100', 'text-gray-700');
             } else {
                btn.classList.add('bg-gray-800', 'text-gray-300');
             }
        });
        
        ['inflable', 'platform', 'mirror'].forEach(service => {
            const el = document.getElementById(`${service}-additional`);
            if (el) el.classList.add('hidden');
        });
        
        updateTotals();
    }
    
    function generateQuote() {
        const quoteContent = document.getElementById('quote-content');
        let quoteHtml = '';
        let finalPrice = 0;
        let count = 0;
        for (const serviceId in selectedServices) {
            const service = selectedServices[serviceId];
            if (!service || !service.price) continue;
            let serviceTotal = service.price;
            let serviceName = '';
            switch(serviceId) {
                case 'inflable': serviceName = 'Cabina Inflable'; break;
                case 'platform': serviceName = 'Plataforma 360¬∞'; break;
                case 'mirror': serviceName = 'Magic Mirror 64"'; break;
            }
            let details = `${service.duration} horas = <strong>$${service.price.toLocaleString()}</strong>`;
            if (additionalHours[serviceId] > 0) {
                serviceTotal += additionalHours[serviceId] * service.additionalPrice;
                details = `${service.duration}h base + ${additionalHours[serviceId]}h extra = <strong>$${serviceTotal.toLocaleString()}</strong>`;
            }
            quoteHtml += `<p><strong>${serviceName}:</strong> ${details}</p>`;
            finalPrice += serviceTotal;
            count++;
        }

        if (includeAlbum && currentEventType === 'social') {
            finalPrice += extrasPrices.album;
            quoteHtml += `<p><strong>Album de firmas:</strong> <strong>$${extrasPrices.album.toLocaleString()}</strong></p>`;
        }

        if (finalPrice === 0) {
            quoteContent.innerHTML = '<p class="text-center">Por favor, selecciona al menos un servicio.</p>';
        } else {
            quoteHtml += `<hr class="my-4 border-gray-200 dark:border-white/10"><p class="text-xl font-bold text-center">Total estimado: <span class="text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-emerald-500 dark:text-[#AFFF33]">$${finalPrice.toLocaleString()}</span></p>`;
            quoteHtml += `<p class="text-center text-sm text-gray-500 mt-1">* Precios sin I.V.A.</p>`;
            if (count >= 2) {
                quoteHtml += `<p class="text-center text-pink-700 dark:text-lime-400 font-semibold mt-4">‚≠ê ¬°Tienes un descuento especial por contratar 2 o m√°s servicios! Cont√°ctanos.</p>`;
            }
            quoteContent.innerHTML = quoteHtml;
        }
        document.getElementById('quote-modal').style.display = 'flex';
    }

    function sendQuoteToWhatsApp() {
        if (Object.keys(selectedServices).length === 0 && !includeAlbum) {
            const genericMessage = "¬°Hola! Me gustar√≠a recibir m√°s informaci√≥n sobre sus servicios.";
            const whatsappUrl = `https://wa.me/525551907875?text=${encodeURIComponent(genericMessage)}`;
            window.open(whatsappUrl, '_blank');
            document.getElementById('success-modal').style.display = 'flex';
            return;
        }

        let message = "¬°Hola! Gener√© esta cotizaci√≥n y quiero m√°s informaci√≥n\n\n";
        const eventTypeName = currentEventType === 'social' ? 'Evento Social' : 'Branding / Activaci√≥n';
        message += `*Cari√±ito PB*\n*Cotizaci√≥n para ${eventTypeName}*\n\n`;
        let total = 0;
        let serviceCount = 0;

        for (const serviceId in selectedServices) {
            const service = selectedServices[serviceId];
            if (!service || !service.price) continue;
            let serviceTotal = service.price;
            let serviceName = '';
            switch(serviceId) {
                case 'inflable': serviceName = 'Cabina Inflable con LED'; break;
                case 'platform': serviceName = 'Plataforma 360¬∞ Infinity'; break;
                case 'mirror': serviceName = 'Magic Mirror 64"'; break;
            }

            let durationText = `${service.duration}h`;
            if (additionalHours[serviceId] > 0) {
                serviceTotal += additionalHours[serviceId] * service.additionalPrice;
                durationText += ` + ${additionalHours[serviceId]}h extra`;
            }
            
            let packageIdentifier = service.packageName ? ` (${service.packageName.charAt(0).toUpperCase() + service.packageName.slice(1)})` : '';

            message += `‚Ä¢ *${serviceName}${packageIdentifier}* (${durationText}): $${serviceTotal.toLocaleString()}\n`;
            total += serviceTotal;
            serviceCount++;
        }
        
        if (includeAlbum && currentEventType === 'social') {
            total += extrasPrices.album;
            message += `‚Ä¢ *Album de firmas*: $${extrasPrices.album.toLocaleString()}\n`;
        }

        message += `\n*TOTAL: $${total.toLocaleString()}* (No incluye I.V.A.)\n\n`;
        const includesList = currentEventType === 'social' ? socialIncludes : corporateIncludes;
        message += `*Incluye:*\n${includesList.join('\n')}\n\n`;
        
        if (serviceCount >= 2) {
            message += "‚≠ê Por contratar 2 servicios o m√°s, ¬°tenemos un descuento especial para ti!\n\n";
        }
        message += "¬øPodr√≠as darme m√°s informaci√≥n sobre disponibilidad y detalles?";
        
        const whatsappUrl = `https://wa.me/525551907875?text=${encodeURIComponent(message)}`;
        window.open(whatsappUrl, '_blank');
        closeQuote();
        document.getElementById('success-modal').style.display = 'flex';
    }
    
    function closeQuote() { document.getElementById('quote-modal').style.display = 'none'; }
    function closeSuccessModal() { document.getElementById('success-modal').style.display = 'none'; }


    // Initial setup on page load
    document.addEventListener('DOMContentLoaded', () => {
        switchEventType('social');
    });

    </script>
</body>
</html>

